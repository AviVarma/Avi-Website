<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>
    {{- if not .IsHome -}}
      {{- with .Title }}{{ . }} :: {{ end -}}
    {{- end -}}
    {{- .Site.Title -}}
    {{- with .Site.Params.Subtitle }} â€” {{ . }}{{ end -}}
  </title>
  <meta
    name="description"
    content="
      {{- with .Description -}}
        {{- . -}}
      {{- else -}}
        {{- with .Summary | plainify -}}
          {{- . -}}
        {{- else -}}
          {{- .Site.Params.description -}}
        {{- end -}}
      {{- end -}}"
    />
  <link rel="canonical" href="{{ .Permalink }}" />

  <!-- Extensibility -->
  {{ partial "head_start.html" . }}

  <!-- Styles -->
  {{ $defaultTheme := .Param "defaultTheme" | default "light" }}
  {{ $prismDark := resources.Get "prism-themes/prism-gruvbox-dark.css" }}
  <link
    rel="stylesheet"
    id="prism-dark"
    {{ if hugo.IsProduction }}
      {{ $prismDark = $prismDark | minify | fingerprint "sha512" }}
      integrity="{{ $prismDark.Data.Integrity }}"
    {{ end }}
    href="{{ $prismDark.RelPermalink }}"
    {{ if eq $defaultTheme "light"}}disabled{{ end }}
    />
  {{ $prismLight := resources.Get "prism-themes/prism-gruvbox-dark.css" }}
  <link
    rel="stylesheet"
    id="prism-light"
    {{ if hugo.IsProduction }}
      {{ $prismLight = $prismLight | minify | fingerprint "sha512" }}
      integrity="{{ $prismLight.Data.Integrity }}"
    {{ end }}
    href="{{ $prismLight.RelPermalink }}"
    {{ if eq $defaultTheme "dark"}}disabled{{ end }}
    />

  {{ $vendor := resources.Get "css/vendor.css" | resources.ExecuteAsTemplate "css/vendor.css" . | resources.PostCSS }}
  {{ $main := resources.Get "css/main.css" | resources.PostCSS }}
  {{ $bundle := slice $vendor $main | resources.Concat "css/bundle.css" }}
  {{ if hugo.IsProduction }}
    {{ $bundle = $bundle | minify | fingerprint "sha512" | resources.PostProcess }}
    <link rel="stylesheet" href="{{ $bundle.RelPermalink }}" integrity="{{ $bundle.Data.Integrity }}" />
  {{ else }}
    <link rel="stylesheet" href="{{ $bundle.RelPermalink }}" />
  {{ end }}

  <!-- Internal Hugo Templates -->
  {{ template "_internal/twitter_cards.html" . }}
  {{ template "_internal/opengraph.html" . }}

  <!-- Extensibility -->
  {{ partial "head_end.html" . }}
</head>
